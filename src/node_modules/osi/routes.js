import React from 'react'
import { Route, IndexRoute, Redirect } from 'react-router'

import { requireAuth, redirectIfAuth } from 'osi/auth'
import { requireAdmin } from 'osi/user'

import App from './app/app.react'
import AppWrap from './app/app-wrap.react'
import Dashboard from './pages/dashboard/dashboard.react'
import AccountPage from './pages/account/AccountPage.react'
import TokensPage from './pages/tokens/tokens.react'
import Home from './pages/home/home.react'
import Login from './pages/login/login.react'
import ResetPassword from './pages/login/reset-password'
import InactiveAccount from './pages/login/inactive'

import PortfolioManagement from './components/portman/routes'

import AdminRoutes from 'cd-admin/routes'

export default (
  <Route path='/' component={AppWrap}>
    <IndexRoute component={Home} />
    <Route path='/dashboard-old' component={App} onEnter={requireAuth}>
      <IndexRoute component={Dashboard} />
      <Route path='accounts' component={AccountPage} />
      <Route path='tokens' component={TokensPage} />
    </Route>

    <Route component={App} onEnter={requireAuth}>
      {PortfolioManagement}
    </Route>

    <Route path='/admin' component={App} onEnter={requireAdmin}>
      {AdminRoutes}
    </Route>

    <Route path='/login' onEnter={redirectIfAuth('/dashboard')}>
      <IndexRoute component={Login} />
      <Route path='reset-password' component={ResetPassword} />
    </Route>

    <Route path='/inactive' onEnter={requireAuth} component={InactiveAccount} />

    <Redirect from='*' to='/' />
  </Route>
)
