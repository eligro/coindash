import React, { Component } from 'react'
import './card.css'

const extractElement = (ename, children) => {
  let indexes = []
  let modified = [...children]
  let addIndex = i => indexes.push(i)

  let extracted = modified.filter((e, i) => e && e.type === ename && addIndex(i))
  indexes.map(i => modified.splice(i, 1, false))

  return [extracted, modified]
}

class Card extends Component {
  render () {
    let { className, title, headerActions: actions, ...props } = this.props
    className = ['card', className].join(' ')
    console.log('props.children: BEFORE ', this.props.children, this)
    let [footer, children] = extractElement('card-footer', this.props.children)
    console.log('props.children: AFTER ', children)
    console.log('footer:', footer)
    return (
      <div {...props} className={className}>
        {((title || actions) &&
          <card-header>
            {title && <h3>{title}</h3>}
            {actions && <div className='actions'>{actions}</div>}
          </card-header>
        )
        }
        <card-content>{children}</card-content>
        {footer}
      </div>
    )
  }
}

export default Card
