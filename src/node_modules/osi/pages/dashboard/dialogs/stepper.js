import React, { Component } from 'react'

import {
  Step,
  Stepper,
  StepLabel
} from 'material-ui/Stepper'
import InfoIcon from 'material-ui/svg-icons/action/info'
import {Card, CardHeader, CardText} from 'material-ui/Card'

const stepsStyle = {
  color: '#FFF'
}
const activeStepStyle = {
  ...stepsStyle,
  fontSize: '20px'
}

const HelpCard = (props) => (
  <Card className='help-card'
    expandable>
    <CardHeader
      title='Guidance'
      avatar={<InfoIcon />} />
    <CardText>
      {props.children}
    </CardText>
  </Card>
)
export default class StepperWrapper extends Component {
  render () {
    const { activeStep } = this.props
    const steps = this.props.children

    return (
      <div className='stepper-wrapper'>
        <div className='steps'>
          <Stepper linear={false} activeStep={this.props.activeStep} style={{fontSize: '20px'}}>
            {steps.map((step, sindex) => (
              <Step key={`token-step-${sindex}`} className='step-container'>
                <StepLabel
                  className='step-label'
                  style={sindex === activeStep ? activeStepStyle : stepsStyle}
                  onClick={() => this.props.onStep(sindex)}>{step.props.title || <i>Unavailable</i>}</StepLabel>
              </Step>
          ))
        }
          </Stepper>
        </div>

        {steps[activeStep].props &&
          <section className='steps-content'>
            <form className='inputs' onSubmit={this.props.onSubmit}>
              {steps[activeStep].props.children}
              <button type='submit' onClick={this.props.onSubmit} className='keyboard-trap'></button>
            </form>
            {steps[activeStep].props.help && <HelpCard>
              {steps[activeStep].props.help || 'N/A'}
            </HelpCard>}
          </section>
        }
      </div>
    )
  }

}

export const StepWrapper = (props) => props.children || 'No content for step'
